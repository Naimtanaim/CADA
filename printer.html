const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

const printTbody = document.getElementById("printTbody");
const printSummary = document.getElementById("printSummary");
const btnPrint = document.getElementById("btnPrint");

// Fungsi untuk load data ke tabel print
async function loadPrintData() {
  printTbody.innerHTML = '';
  const { data, error } = await supabase.from('plt_table_duplicate').select('*');
  if(error){ console.error(error); return; }

  let totalCbm=0, totalBox=0, totalWeight=0;

  data.forEach(row => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${row.NO}</td>
      <td>${row.SIZE}</td>
      <td>${row["長*寬*高"]}</td>
      <td>${row.材積}</td>
      <td>${row.CBM}</td>
      <td>${row.箱數}</td>
      <td>${row.重量}</td>
    `;
    printTbody.appendChild(tr);

    totalCbm += parseFloat(row.材積)||0;
    totalBox += parseInt(row.箱數)||0;
    totalWeight += (parseFloat(row.重量)||0)+25;
  });

  printSummary.innerHTML = `Total 材積: ${totalCbm.toFixed(2)}<br>Total 箱數: ${totalBox}<br>Total 重量: ${totalWeight} kg`;
}

// Event tombol cetak
btnPrint.addEventListener('click', () => {
  window.print();
});
function showCurrentDate() {
    const today = new Date();
    const options = { year: 'numeric', month: 'numeric', day: 'numeric' };
    const formattedDate = today.toLocaleDateString('id-ID', options);
    document.getElementById('currentDate').innerText = formattedDate;
  }

  // Jalankan saat halaman dimuat
  showCurrentDate();
